{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/index.js","src/Bee.js"],"names":["createHive","bees","hive","bee","addBees","Object","assign","type","_ref","quantity","damage","health","tmp","slice","i","push","_Bee2","updatePageWithHive","elements","forEach","el","tmpl","id","insertAdjacentHTML","getRandomBeeIndex","min","max","length","Math","floor","random","displayMessage","msg","document","querySelector","classList","remove","textContent","add","destroyTheHive","alive","querySelectorAll","innerHTML","button","addEventListener","init","checkQueen","queen","filter","fireshot","index","setTimeout","removeBees","beeElements","parentNode","removeChild","removeEventListener","_Bee","require","worker","drone","Bee","_classCallCheck","this","status"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Bee from './Bee';\r\n\r\n/**\r\n * Bee settings\r\n * @type {Object}\r\n */\r\nconst bees = {\r\n  queen: { quantity: 1, damage: 8, health: 100 },\r\n  worker: { quantity: 5, damage: 10, health: 75 },\r\n  drone: { quantity: 8, damage: 12, health: 50 }\r\n};\r\n\r\n/**\r\n * Element settings\r\n * @type {Object}\r\n */\r\nconst elements = {\r\n  queen: document.querySelector('#queen'),\r\n  worker: document.querySelector('#worker'),\r\n  drone: document.querySelector('#drone')\r\n};\r\n\r\n/**\r\n * Creates a new hive full of bees using the Bee class\r\n */\r\nfunction createHive(bees) {\r\n  let hive = [];\r\n  for (const bee in bees) {\r\n    hive = addBees(hive, Object.assign({ type: bee }, bees[bee]));\r\n  }\r\n  return hive;\r\n}\r\n\r\n/**\r\n * Adds bees of all types to the hive\r\n */\r\nfunction addBees(hive, { type, quantity, damage, health }) {\r\n  const tmp = hive.slice(0);\r\n  for (let i = 0; i < quantity; i++) {\r\n    tmp.push(new Bee({ i, type, damage, health }));\r\n  }\r\n  return tmp;\r\n}\r\n\r\n\r\n/**\r\n * For each bee in the hive add it to the page under its type\r\n */\r\nfunction updatePageWithHive(elements, hive) {\r\n  hive.forEach(el => {\r\n    const tmpl = `<div data-id=\"${el.id}\" class=\"bee ${el.type}\">\r\n                  <div class=\"type\">${el.type}</div>\r\n                  <div class=\"health\">${el.health}</div>\r\n                  </div>`;\r\n    elements[el.type].insertAdjacentHTML('beforeend', tmpl);\r\n  });\r\n}\r\n\r\n/**\r\n * Grabs a random bee from the hive\r\n */\r\nfunction getRandomBeeIndex(hive) {\r\n  const min = 0;\r\n  const max = hive.length - 1;\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n/**\r\n * Updates the game message\r\n */\r\nfunction displayMessage(msg, type) {\r\n  const el = document.querySelector('#message');\r\n  if (type === 'normal') el.classList.remove('warning');\r\n  el.textContent = msg;\r\n  el.classList.add(type);\r\n}\r\n\r\n/**\r\n * Sets all bees to dead, then updates the page with the new\r\n * bee information. Then updates the message and button so that\r\n * the user can play again.\r\n */\r\nfunction destroyTheHive(hive) {\r\n  hive.forEach(el => el.alive === false);\r\n  const bees = document.querySelectorAll('.bee');\r\n  for (let i = 0; i < bees.length; i++) {\r\n    const bee = bees[i];\r\n    const type = bee.querySelector('.type').textContent;\r\n    bee.classList.add('dead');\r\n    bee.innerHTML = `<div class=\"type\">${type}</div><div class=\"health\">0</div>`;\r\n  }\r\n  displayMessage('Hive destroyed', 'warning');\r\n  const button = document.querySelector('.killbee');\r\n  button.textContent = 'Play again';\r\n  button.addEventListener('click', init);\r\n}\r\n\r\n/**\r\n * Checks whether the queen is still alive. If not, destroy the hive\r\n */\r\nfunction checkQueen(hive) {\r\n  const queen = hive.filter(el => el.type === 'queen')[0];\r\n  if (queen.health <= 0) destroyTheHive(hive);\r\n}\r\n\r\n/**\r\n * Chooses a random bee. If the bee is dead, choose a new bee.\r\n * The bees health is updated and the page is updated.\r\n */\r\nfunction fireshot(hive) {\r\n  const index = getRandomBeeIndex(hive);\r\n  const bee = hive[index];\r\n  if (bee.health <= 0) fireshot(hive);\r\n  bee.health = bee.health - bee.damage;\r\n  if (bee.health <= 0) bee.health = 0;\r\n  const el = document.querySelector(`#${bee.type} div[data-id=\"${bee.id}\"]`);\r\n  el.classList.add(bee.health === 0 ? 'dead' : 'hit');\r\n  setTimeout(() => { el.classList.remove('hit'); }, 1000);\r\n  el.innerHTML = `<div class=\"type\">${bee.type}</div>\r\n                  <div class=\"health\">${bee.health}</div>`;\r\n}\r\n\r\n\r\n/**\r\n * Removes all the bees from the page\r\n */\r\nfunction removeBees() {\r\n  const beeElements = document.querySelectorAll('.bee');\r\n  for (let i = 0; i < beeElements.length; i++) {\r\n    beeElements[i].parentNode.removeChild(beeElements[i]);\r\n  }\r\n}\r\n\r\n/**\r\n * Initialises the game\r\n */\r\nfunction init() {\r\n\r\n  removeBees();\r\n\r\n  const hive = createHive(bees);\r\n  updatePageWithHive(elements, hive);\r\n\r\n  const button = document.querySelector('.killbee');\r\n  button.removeEventListener('click', init);\r\n  button.addEventListener('click', () => {\r\n    fireshot(hive);\r\n    checkQueen(hive);\r\n  });\r\n\r\n  displayMessage('Destroy the hive!', 'normal');\r\n}\r\n\r\n\r\ninit();\r\n","class Bee {\r\n\r\n  constructor({ i, type, damage, health }) {\r\n    this.id = i;\r\n    this.type = type;\r\n    this.damage = damage;\r\n    this.health = health;\r\n    this.alive = true;\r\n  }\r\n\r\n  reduceHealth() {\r\n    this.health--;\r\n  }\r\n\r\n  checkHealth() {\r\n    if (this.health < 0) {\r\n      this.status = false;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default Bee;\r\n\r\n"]}